plugins {
	id "java"
	id "maven-publish"
}

repositories {
	mavenCentral()
	maven { url "https://jitpack.io" }
}

dependencies {
	implementation "com.github.paulevsGitch:EnigmaToV2:e4860b0e9d"
}

task convertMappings(type: JavaExec) {
	group = "Execution"
	description = "Mappings convertion"
	classpath = sourceSets.main.runtimeClasspath
	mainClass = "paulevs.enigmatov2.Main"
	args = ["./mappings", "./temp/mappings"]
}

task putToJar(type: Zip) {
	from "temp"
	include "mappings/mappings.tiny"
	archiveFileName = "BIN-Mappings-BH.jar"
	destinationDirectory = file("/build/libs")
}

build.dependsOn "convertMappings", "putToJar"

publishing {
	publications {
		mavenJava(MavenPublication) {
			groupId "paulevs.bin-bh"
			artifactId "BIN-BH"
		}
	}
	repositories {}
}