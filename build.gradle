plugins {
	id "java"
	id "maven-publish"
}

repositories {
	mavenCentral()
	maven { url "https://jitpack.io" }
}

dependencies {
	implementation "com.github.paulevsGitch:EnigmaToV2:e4860b0e9d"
}

task convertMappings(type: JavaExec) {
	group = "Execution"
	description = "Mappings convertion"
	classpath = sourceSets.main.runtimeClasspath
	mainClass = "paulevs.enigmatov2.Main"
	args = ["./mappings", "./temp/mappings"]
}

jar {
	from("temp") {
		include "mappings/mappings.tiny"
	}
}

build.dependsOn convertMappings
build.shouldRunAfter convertMappings

publishing {
	publications {
		mavenJava(MavenPublication) {
			from components.java
		}
	}
	repositories {}
}